<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Personality number calculator – Åse Steinsland</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Vazirmatn:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="assets/theme.css">
</head>
<body>
  <div class="app-shell">
    <header class="hero">
      <div class="branding">
        <div class="brand-mark">ÅS</div>
        <div class="brand-copy">
          <h1 data-i18n-key="title">Personality number calculator</h1>
          <p data-i18n-key="subtitle">Consonants reveal your public expression – following Åse Steinsland’s method.</p>
        </div>
      </div>
      <nav class="primary-nav">
        <a href="navnetall.html" data-i18n-key="navName">Name number</a>
        <a href="hjertetall.html" data-i18n-key="navSoul">Soul urge</a>
        <a href="personlighetstall.html" data-i18n-key="navPersonality">Personality</a>
        <a href="skjebnetall.html" data-i18n-key="navDestiny">Destiny</a>
        <a href="modenhetstall.html" data-i18n-key="navMaturity">Maturity</a>
        <a href="personlige-ar.html" data-i18n-key="navPersonalYear">Personal year</a>
        <a href="index.html" data-i18n-key="navHome">Overview</a>
      </nav>
      <div class="language-switch" role="group" aria-label="Language selector">
        <button type="button" data-lang="en" aria-pressed="true">English</button>
        <button type="button" data-lang="no" aria-pressed="false">Norsk</button>
        <button type="button" data-lang="fa" aria-pressed="false">فارسی</button>
      </div>
    </header>

    <section class="page-section card">
      <div class="result-summary">
        <h2 data-i18n-key="methodHeading">Åse’s consonant lens</h2>
        <p data-i18n-key="methodCopy">Remove the vowels from your birth name. The remaining consonants reveal how others perceive your tone. Y becomes a consonant when paired with a vowel.</p>
        <div class="grid-two">
          <a class="primary-button" href="modenhetstall.html" data-i18n-key="ctaNext">Learn more?</a>
          <a class="secondary-button" href="hjertetall.html" data-i18n-key="ctaBack">Back to soul urge</a>
        </div>
      </div>
    </section>

    <section class="page-section card" id="calculator">
      <form class="form-grid" id="personality-form">
        <div>
          <label for="nameInput" data-i18n-key="labelName">Full birth name</label>
          <input id="nameInput" type="text" autocomplete="name" data-i18n-key="placeholderName" data-i18n-attr="placeholder">
        </div>
        <div>
          <button type="submit" class="primary" data-i18n-key="btnCalculate">Calculate personality number</button>
        </div>
      </form>
    </section>

    <section class="page-section card" id="result" hidden>
      <div class="result-summary">
        <span class="badge" id="methodBadge"></span>
        <h2 id="resultTitle"></h2>
        <p id="resultStory"></p>
        <p id="normalised"></p>
        <p id="ignored"></p>
        <p id="reduction"></p>
      </div>
      <div id="dna"></div>
      <div class="table-responsive">
        <table class="breakdown">
          <thead>
            <tr>
              <th data-i18n-key="tableLetter">Consonant</th>
              <th data-i18n-key="tableValue">Value</th>
            </tr>
          </thead>
          <tbody id="tableBody"></tbody>
          <tfoot>
            <tr>
              <th data-i18n-key="tableTotal">Total</th>
              <th id="tableTotalValue"></th>
            </tr>
          </tfoot>
        </table>
      </div>
    </section>

    <section class="page-section card">
      <div class="result-summary">
        <h2 data-i18n-key="nextHeading">Blend heart and personality</h2>
        <p data-i18n-key="nextCopy">Combine this number with the soul urge to balance inner motive and outward impression before moving to destiny and maturity calculations.</p>
        <div class="grid-two">
          <a class="primary-button" href="modenhetstall.html" data-i18n-key="nextMaturity">Maturity calculator</a>
          <a class="secondary-button" href="index.html" data-i18n-key="ctaOverview">Back to overview</a>
        </div>
      </div>
    </section>

    <footer class="page-footer">
      <span>© <span data-i18n-key="copyright">Åse Karin Steinsland. All rights reserved.</span></span>
      <a href="https://www.numerologensverden.no/regn-ut-navnetall/" target="_blank" rel="noopener" data-i18n-key="sourceLink">Read Åse’s full guide</a>
    </footer>
  </div>

  <script src="assets/i18n.js"></script>
  <script src="assets/numerology.js"></script>
  <script src="assets/number-stories.js"></script>
  <script>
    (function () {
      const form = document.getElementById('personality-form');
      const resultSection = document.getElementById('result');
      const tableBody = document.getElementById('tableBody');
      const dnaContainer = document.getElementById('dna');
      const methodBadge = document.getElementById('methodBadge');
      const resultTitle = document.getElementById('resultTitle');
      const resultStory = document.getElementById('resultStory');
      const normalised = document.getElementById('normalised');
      const ignored = document.getElementById('ignored');
      const reduction = document.getElementById('reduction');
      const totalCell = document.getElementById('tableTotalValue');
      const langButtons = document.querySelectorAll('.language-switch button[data-lang]');

      const translations = {
        en: {
          strings: {
            title: 'Personality number calculator',
            subtitle: 'Consonants reveal your public expression – following Åse Steinsland’s method.',
            navName: 'Name number',
            navSoul: 'Soul urge',
            navPersonality: 'Personality',
            navDestiny: 'Destiny',
            navMaturity: 'Maturity',
            navPersonalYear: 'Personal year',
            navHome: 'Overview',
            methodHeading: 'Åse’s consonant lens',
            methodCopy: 'Remove the vowels from your birth name. The remaining consonants reveal how others perceive your tone. Y becomes a consonant when paired with a vowel.',
            ctaNext: 'Learn more?',
            ctaBack: 'Back to soul urge',
            labelName: 'Full birth name',
            placeholderName: 'Enter the complete name given at birth',
            btnCalculate: 'Calculate personality number',
            tableLetter: 'Consonant',
            tableValue: 'Value',
            tableTotal: 'Total',
            normalizedLabel: 'Consonants counted for calculation',
            nextHeading: 'Blend heart and personality',
            nextCopy: 'Combine this number with the soul urge to balance inner motive and outward impression before moving to destiny and maturity calculations.',
            nextMaturity: 'Maturity calculator',
            ctaOverview: 'Back to overview',
            copyright: 'Åse Karin Steinsland. All rights reserved.',
            sourceLink: 'Read Åse’s full guide',
            methodLatin: 'Method: Consonants from Åse’s Pythagorean chart.',
            methodRTL: 'Method: Abjad consonants translated to Åse’s reduction.',
            ignoredNone: 'All characters were counted in the calculation.',
            ignoredSome: 'Ignored characters:',
            reductionPath: 'Reduction path:',
            reductionMaster: 'Master number – no further reduction applied.',
            reductionSingle: 'Already a single digit.',
          },
        },
        no: {
          strings: {
            title: 'Personlighetstallkalkulator',
            subtitle: 'Konsonanter viser hvordan du oppfattes – etter Åse Steinslands metode.',
            navName: 'Navnetall',
            navSoul: 'Hjertetall',
            navPersonality: 'Personlighetstall',
            navDestiny: 'Skjebnetall',
            navMaturity: 'Modenhetstall',
            navPersonalYear: 'Personlige år',
            navHome: 'Oversikt',
            methodHeading: 'Åses konsonantblikk',
            methodCopy: 'Fjern vokalene fra fødenavnet. Konsonantene som står igjen viser hvordan andre opplever din energi. Y blir en konsonant når den står sammen med en vokal.',
            ctaNext: 'Learn more?',
            ctaBack: 'Tilbake til hjertetall',
            labelName: 'Fullt fødenavn',
            placeholderName: 'Oppgi navnet slik det står i fødselsattesten',
            btnCalculate: 'Beregn personlighetstallet',
            tableLetter: 'Konsonant',
            tableValue: 'Verdi',
            tableTotal: 'Sum',
            normalizedLabel: 'Konsonanter brukt i beregningen',
            nextHeading: 'Balanser hjerte og personlighet',
            nextCopy: 'Kombiner dette tallet med hjertetallet for å avstemme indre motivasjon og ytre uttrykk før du går videre til skjebne- og modenhetstall.',
            nextMaturity: 'Modenhetstall-kalkulator',
            ctaOverview: 'Tilbake til oversikten',
            copyright: 'Åse Karin Steinsland. Alle rettigheter reservert.',
            sourceLink: 'Les hele veiledningen hos Åse',
            methodLatin: 'Metode: Konsonanter fra Åses pythagoriske tabell.',
            methodRTL: 'Metode: Abjad-konsonanter oversatt til Åses reduksjon.',
            ignoredNone: 'Alle tegn ble med i beregningen.',
            ignoredSome: 'Ignorerte tegn:',
            reductionPath: 'Reduksjonsrekkefølge:',
            reductionMaster: 'Mestertall – ikke redusert videre.',
            reductionSingle: 'Allerede ett siffer.',
          },
        },
        fa: {
          strings: {
            title: 'ماشین‌حساب عدد شخصیت',
            subtitle: 'صامت‌ها بیان عمومی شما را نشان می‌دهند – مطابق روش آسه استینسلاند.',
            navName: 'عدد نام',
            navSoul: 'اشتیاق قلبی',
            navPersonality: 'عدد شخصیت',
            navDestiny: 'عدد سرنوشت',
            navMaturity: 'عدد بلوغ',
            navPersonalYear: 'سال شخصی',
            navHome: 'مرور کلی',
            methodHeading: 'دیدگاه صامتی آسه',
            methodCopy: 'واکه‌ها را از نام تولد حذف کنید. صامت‌های باقی‌مانده نشان می‌دهند دیگران چه انرژی از شما حس می‌کنند. وقتی Y کنار واکه قرار گیرد، صامت حساب می‌شود.',
            ctaNext: 'Learn more?',
            ctaBack: 'بازگشت به اشتیاق قلبی',
            labelName: 'نام کامل هنگام تولد',
            placeholderName: 'نام درج‌شده در گواهی تولد را وارد کنید',
            btnCalculate: 'محاسبه عدد شخصیت',
            tableLetter: 'صامت',
            tableValue: 'ارزش',
            tableTotal: 'جمع',
            normalizedLabel: 'صامت‌های به‌کاررفته در محاسبه',
            nextHeading: 'هماهنگی قلب و شخصیت',
            nextCopy: 'این عدد را با اشتیاق قلبی ترکیب کنید تا پیش از ورود به اعداد سرنوشت و بلوغ، توازن انگیزه درونی و جلوه بیرونی را ببینید.',
            nextMaturity: 'ماشین‌حساب عدد بلوغ',
            ctaOverview: 'بازگشت به مرور کلی',
            copyright: 'آسه کارین استینسلاند. کلیه حقوق محفوظ است.',
            sourceLink: 'راهنمای کامل آسه را بخوانید',
            methodLatin: 'روش: صامت‌ها بر اساس جدول فیثاغورثی آسه.',
            methodRTL: 'روش: صامت‌های ابجد با کاهش ویژه آسه.',
            ignoredNone: 'همه‌ی حروف در محاسبه استفاده شدند.',
            ignoredSome: 'حروف نادیده گرفته‌شده:',
            reductionPath: 'مسیر کاهش:',
            reductionMaster: 'عدد استادی – کاهش بیشتر ندارد.',
            reductionSingle: 'همین حالا یک رقم واحد است.',
          },
        },
      };

      const i18n = createI18n({
        translations,
        defaultLang: 'en',
        directionMap: { fa: 'rtl' },
      });

      function syncButtons(lang) {
        langButtons.forEach((button) => {
          const isActive = button.dataset.lang === lang;
          button.setAttribute('aria-pressed', isActive ? 'true' : 'false');
        });
      }

      function createDNATrack(breakdown) {
        const track = document.createElement('div');
        track.className = 'dna-track';
        breakdown.forEach((entry) => {
          const node = document.createElement('div');
          node.className = 'dna-node';
          const valueEl = document.createElement('div');
          valueEl.className = 'dna-value';
          valueEl.textContent = entry.value;
          const letterEl = document.createElement('div');
          letterEl.className = 'dna-letter';
          letterEl.textContent = entry.label;
          node.appendChild(valueEl);
          node.appendChild(letterEl);
          track.appendChild(node);
        });
        return track;
      }

      function renderResult(breakdown) {
        const stories = NumberStories.stories[i18n.lang] || NumberStories.stories.en;
        resultSection.hidden = false;
        tableBody.innerHTML = '';
        dnaContainer.innerHTML = '';

        breakdown.breakdown.forEach((entry) => {
          const row = document.createElement('tr');
          const letterCell = document.createElement('td');
          letterCell.textContent = entry.label;
          const valueCell = document.createElement('td');
          valueCell.textContent = entry.value;
          row.appendChild(letterCell);
          row.appendChild(valueCell);
          tableBody.appendChild(row);
        });

        totalCell.textContent = breakdown.total;
        dnaContainer.appendChild(createDNATrack(breakdown.breakdown));

        methodBadge.textContent = breakdown.script === 'rtl' ? i18n.t('methodRTL') : i18n.t('methodLatin');
        resultTitle.textContent = `${i18n.t('navPersonality')}: ${breakdown.number}`;
        resultStory.textContent = stories[breakdown.number] || '';
        normalised.textContent = `${i18n.t('normalizedLabel')}: ${breakdown.normalized}`;
        if (breakdown.ignored.length) {
          ignored.textContent = `${i18n.t('ignoredSome')} ${breakdown.ignored.join(', ')}`;
        } else {
          ignored.textContent = i18n.t('ignoredNone');
        }
        if (breakdown.steps.length > 1) {
          reduction.textContent = `${i18n.t('reductionPath')} ${breakdown.steps.join(' → ')}`;
        } else if ([11, 22, 33].includes(breakdown.number)) {
          reduction.textContent = `${i18n.t('reductionPath')} ${i18n.t('reductionMaster')}`;
        } else {
          reduction.textContent = `${i18n.t('reductionPath')} ${i18n.t('reductionSingle')}`;
        }
      }

      langButtons.forEach((button) => {
        button.addEventListener('click', () => {
          const lang = button.dataset.lang;
          i18n.setLanguage(lang);
          syncButtons(lang);
          const currentValue = document.getElementById('nameInput').value.trim();
          if (currentValue) {
            const breakdown = Numerology.breakdownName(currentValue, { mode: 'consonant' });
            renderResult(breakdown);
          }
        });
      });

      i18n.onChange((lang) => {
        syncButtons(lang);
      });

      form.addEventListener('submit', (event) => {
        event.preventDefault();
        const value = document.getElementById('nameInput').value.trim();
        if (!value) {
          resultSection.hidden = true;
          return;
        }

        const autoLang = Numerology.inferLanguageFromName(value);
        if (autoLang && autoLang !== i18n.lang) {
          i18n.setLanguage(autoLang);
          syncButtons(autoLang);
        }

        const breakdown = Numerology.breakdownName(value, { mode: 'consonant' });
        renderResult(breakdown);
      });
    })();
  </script>
</body>
</html>
